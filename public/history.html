<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat History - Women Legal Rights</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ================= FIXED HEADER ================= -->
  <div class="fixed-header">
    <div class="header-left">
      <div class="hamburger" onclick="toggleMenu()">â˜°</div>
      <h1 class="title">ğŸ“œ Chat History</h1>
    </div>
    <div class="nav-buttons">
      <button onclick="toggleTheme()">ğŸŒ™</button>
      <button onclick="logout()">ğŸšª</button>
    </div>
  </div>

  <!-- ================= SIDEBAR MENU ================= -->
  <div id="sidebar" class="sidebar">
    <div class="close-btn" onclick="toggleMenu()">âœ–</div>
    <a href="profile.html">ğŸ‘¤ Profile</a>
    <a href="index.html">ğŸ’¬ Chat</a>
    <a href="help.html">â“ Help</a>
    <a href="tel:181">ğŸš¨ Emergency 181</a>
  </div>

  <!-- ================= HISTORY CONTENT ================= -->
  <div class="history-content">
    <div id="historyContainer" class="history-messages"></div>
    
    <div class="history-actions">
      <button class="clear-btn" onclick="clearHistory()">ğŸ—‘ï¸ Clear History</button>
      <button class="back-button" onclick="goToChat()">â¬… Back to Chat</button>
    </div>
  </div>

  <!-- ================= FIXED FOOTER ================= -->
  <div class="fixed-footer">
    <p>ğŸ“ Women Helpline: 181 | Â© 2024 Women Legal Rights</p>
  </div>

<script>

function loadHistory() {
    let history = JSON.parse(localStorage.getItem("chatHistory")) || [];
    let historyContainer = document.getElementById("historyContainer");

    historyContainer.innerHTML = "";

    if (history.length === 0) {
        historyContainer.innerHTML = '<div class="no-history">No chat history yet. Start a conversation!</div>';
        return;
    }

    history.forEach(chat => {
        let div = document.createElement("div");
        div.className = chat.sender === "You" ? "message user" : "message bot";
        div.innerHTML = `<strong>${chat.sender}:</strong> ${chat.message}`;
        historyContainer.appendChild(div);
    });
}

function clearHistory() {
    if (confirm("Are you sure you want to clear all chat history?")) {
        localStorage.removeItem("chatHistory");
        loadHistory();
    }
}

function goToChat() {
    window.location.href = "index.html";
}

function toggleMenu() {
    const sidebar = document.getElementById("sidebar");
    const currentLeft = sidebar.style.left;
    if (currentLeft === "0px") {
        sidebar.style.left = "-250px";
    } else {
        sidebar.style.left = "0px";
    }
}

function toggleTheme() {
    document.body.classList.toggle("dark-mode");
}

function logout() {
    localStorage.removeItem("isLoggedIn");
    window.location.href = "index.html";
}

window.onload = loadHistory;

</script>

<script src="script.js"></script>
</body>
</html>
